<Window x:Class="PulseHost.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Pulse Host" Height="580" Width="550"
        ResizeMode="CanResize"
        WindowStartupLocation="CenterScreen">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="Pulse Host" FontSize="32" FontWeight="Bold" 
                       Foreground="#667eea" HorizontalAlignment="Center"/>
            <TextBlock Text="Remote Desktop Host Application" FontSize="14" 
                       Foreground="#666" HorizontalAlignment="Center" Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <!-- Pairing Panel -->
            <StackPanel x:Name="PairingPanel" Visibility="Visible">
                <TextBlock Text="Connect to Pulse Server" FontSize="16" FontWeight="SemiBold" 
                           Margin="0,0,0,10"/>
                <TextBlock Text="Get the pairing code and server URL from your Pulse web dashboard" 
                           FontSize="12" Foreground="#666" TextWrapping="Wrap" Margin="0,0,0,15"/>
                
                <TextBlock Text="Server URL" FontSize="14" Margin="0,0,0,5"/>
                <TextBox x:Name="ServerUrlTextBox" Height="35" FontSize="12" 
                         Padding="10,8" Margin="0,0,0,15" 
                         ToolTip="Enter the WebSocket server URL (e.g., ws://192.168.1.100:3001/ws)"/>
                
                <TextBlock Text="Device Name" FontSize="14" Margin="0,0,0,5"/>
                <TextBox x:Name="DeviceNameTextBox" Height="35" FontSize="14" 
                         Padding="10,8" Margin="0,0,0,15"/>
                
                <TextBlock Text="Pairing Code" FontSize="14" Margin="0,0,0,5"/>
                <TextBox x:Name="PairingCodeTextBox" Height="35" FontSize="14" 
                         Padding="10,8" Margin="0,0,0,15" MaxLength="6"/>
                
                <Button x:Name="ConnectButton" Content="Connect" Height="40" 
                        FontSize="14" FontWeight="SemiBold" Background="#667eea" 
                        Foreground="White" BorderThickness="0" Cursor="Hand"
                        Click="ConnectButton_Click"/>
            </StackPanel>

            <!-- Connected Panel -->
            <StackPanel x:Name="ConnectedPanel" Visibility="Collapsed">
                <Border Background="#d4edda" Padding="15" CornerRadius="5" Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="âœ“ Connected" FontSize="16" FontWeight="Bold" 
                                   Foreground="#155724"/>
                        <TextBlock x:Name="StatusText" Text="Waiting for remote session..." 
                                   FontSize="12" Foreground="#155724" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>

                <TextBlock Text="Session Information" FontSize="14" FontWeight="SemiBold" 
                           Margin="0,0,0,10"/>
                <Border Background="#f8f9fa" Padding="15" CornerRadius="5">
                    <StackPanel>
                        <TextBlock>
                            <Run Text="Status: " FontWeight="SemiBold"/>
                            <Run x:Name="SessionStatusText" Text="Idle"/>
                        </TextBlock>
                        <TextBlock Margin="0,5,0,0">
                            <Run Text="Frames Sent: " FontWeight="SemiBold"/>
                            <Run x:Name="FrameCountText" Text="0"/>
                        </TextBlock>
                    </StackPanel>
                </Border>

                <CheckBox x:Name="StartOnLoginCheckBox" Content="Start on Windows login" 
                          Margin="0,20,0,0" Checked="StartOnLoginCheckBox_Checked" 
                          Unchecked="StartOnLoginCheckBox_Unchecked"/>
                
                <Button x:Name="StopSharingButton" Content="Stop Sharing" Height="40" 
                        Margin="0,15,0,0" FontSize="14" FontWeight="SemiBold" 
                        Background="#dc3545" Foreground="White" BorderThickness="0" 
                        Cursor="Hand" Click="StopSharingButton_Click"/>
            </StackPanel>
        </Grid>

        <!-- Footer -->
        <TextBlock Grid.Row="2" Text="Remote access is active. Close this window to stop sharing." 
                   FontSize="11" Foreground="#999" HorizontalAlignment="Center" 
                   Margin="0,20,0,0" TextWrapping="Wrap" TextAlignment="Center"/>
    </Grid>
</Window>
